---
title: Route Structure
description: Structure and organization of API routes in framework package
---

# üóÇÔ∏è Route Structure

Complete guide for structure and organization of API routes in framework package.

## üìÅ Overall Structure

```
packages/framework/src/routes/
‚îú‚îÄ‚îÄ products/              # Complete route example
‚îÇ   ‚îú‚îÄ‚îÄ type.ts           # All interfaces and types
‚îÇ   ‚îú‚îÄ‚îÄ get.ts            # Raw GET functions
‚îÇ   ‚îú‚îÄ‚îÄ post.ts           # Raw POST/PUT functions
‚îÇ   ‚îú‚îÄ‚îÄ delete.ts         # Raw DELETE functions
‚îÇ   ‚îú‚îÄ‚îÄ query.ts          # React Query hooks
‚îÇ   ‚îî‚îÄ‚îÄ index.ts          # exports
‚îú‚îÄ‚îÄ users/                # new route
‚îÇ   ‚îú‚îÄ‚îÄ type.ts
‚îÇ   ‚îú‚îÄ‚îÄ get.ts
‚îÇ   ‚îú‚îÄ‚îÄ post.ts
‚îÇ   ‚îú‚îÄ‚îÄ delete.ts
‚îÇ   ‚îú‚îÄ‚îÄ query.ts
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îî‚îÄ‚îÄ categories/           # new route
    ‚îú‚îÄ‚îÄ type.ts
    ‚îú‚îÄ‚îÄ get.ts
    ‚îú‚îÄ‚îÄ post.ts
    ‚îú‚îÄ‚îÄ delete.ts
    ‚îú‚îÄ‚îÄ query.ts
    ‚îî‚îÄ‚îÄ index.ts
```

## üìù Required Files

### 1. type.ts - Type Definitions

```typescript
// src/routes/products/type.ts
import { PaginationParams, QueryParams } from "../../types";

/**
 * Product interface
 */
export interface IProduct {
  id: string;
  name: string;
  description: string;
  price: number;
  categoryId: string;
  categoryName: string;
  imageUrl?: string;
  isActive: boolean;
  createdAt: string;
  updatedAt: string;
}

/**
 * Create product request interface
 */
export interface ICreateProductRequest {
  name: string;
  description: string;
  price: number;
  categoryId: string;
  imageUrl?: string;
  isActive?: boolean;
}

/**
 * Update product request interface
 */
export interface IUpdateProductRequest {
  id: string;
  name?: string;
  description?: string;
  price?: number;
  categoryId?: string;
  imageUrl?: string;
  isActive?: boolean;
}

/**
 * Product list query parameters
 */
export interface IProductListParams extends QueryParams {
  categoryId?: string;
  isActive?: boolean;
  minPrice?: number;
  maxPrice?: number;
}

/**
 * Product detail query parameters
 */
export interface IProductDetailParams {
  id: string;
}

/**
 * Product search parameters
 */
export interface IProductSearchParams extends QueryParams {
  query: string;
  categoryId?: string;
  minPrice?: number;
  maxPrice?: number;
}
```

### 2. get.ts - GET Functions

```typescript
// src/routes/products/get.ts
import { APIHttp, API_ENDPOINTS } from "../../utils";
import { 
  APIHttpType, 
  APIHttpPaginatedType 
} from "../../types";
import {
  IProduct,
  IProductListParams,
  IProductDetailParams,
  IProductSearchParams,
} from "./type";

/**
 * Get products list with pagination and filters
 */
export function GetProductsList(
  params?: IProductListParams
): Promise<APIHttpPaginatedType<IProduct>> {
  return APIHttp.get(API_ENDPOINTS.PRODUCTS.LIST, {
    params: {
      pageNo: params?.pageNo || 1,
      rowCount: params?.rowCount || 10,
      search: params?.search,
      sortBy: params?.sortBy,
      sortOrder: params?.sortOrder,
      categoryId: params?.categoryId,
      isActive: params?.isActive,
      minPrice: params?.minPrice,
      maxPrice: params?.maxPrice,
    },
  });
}

/**
 * Get single product by ID
 */
export function GetProductDetail(
  params: IProductDetailParams
): Promise<APIHttpType<IProduct>> {
  return APIHttp.get(`${API_ENDPOINTS.PRODUCTS.LIST}/${params.id}`);
}

/**
 * Search products
 */
export function SearchProducts(
  params: IProductSearchParams
): Promise<APIHttpPaginatedType<IProduct>> {
  return APIHttp.get(API_ENDPOINTS.PRODUCTS.SEARCH, {
    params: {
      query: params.query,
      pageNo: params.pageNo || 1,
      rowCount: params.rowCount || 10,
      categoryId: params.categoryId,
      minPrice: params.minPrice,
      maxPrice: params.maxPrice,
      sortBy: params.sortBy,
      sortOrder: params.sortOrder,
    },
  });
}
```

### 3. post.ts - POST/PUT Functions

```typescript
// src/routes/products/post.ts
import { APIHttp, API_ENDPOINTS } from "../../utils";
import { APIHttpType } from "../../types";
import {
  IProduct,
  ICreateProductRequest,
  IUpdateProductRequest,
} from "./type";

/**
 * Create a new product
 */
export function CreateProduct(
  productData: ICreateProductRequest
): Promise<APIHttpType<IProduct>> {
  return APIHttp.post(API_ENDPOINTS.PRODUCTS.CREATE, productData);
}

/**
 * Update an existing product
 */
export function UpdateProduct(
  productData: IUpdateProductRequest
): Promise<APIHttpType<IProduct>> {
  const { id, ...updateData } = productData;
  return APIHttp.put(`${API_ENDPOINTS.PRODUCTS.UPDATE}/${id}`, updateData);
}

/**
 * Upload product image
 */
export function UploadProductImage(
  productId: string,
  imageFile: File
): Promise<APIHttpType<{ imageUrl: string }>> {
  const formData = new FormData();
  formData.append("image", imageFile);
  formData.append("productId", productId);

  return APIHttp.post(
    `${API_ENDPOINTS.PRODUCTS.UPDATE}/${productId}/image`,
    formData,
    {
      headers: {
        "Content-Type": "multipart/form-data",
      },
    }
  );
}

/**
 * Bulk create products
 */
export function BulkCreateProducts(
  products: ICreateProductRequest[]
): Promise<APIHttpType<{ created: number; failed: number }>> {
  return APIHttp.post(`${API_ENDPOINTS.PRODUCTS.CREATE}/bulk`, { products });
}
```

### 4. delete.ts - DELETE Functions

```typescript
// src/routes/products/delete.ts
import { APIHttp, API_ENDPOINTS } from "../../utils";
import { APIHttpType } from "../../types";

/**
 * Delete a product by ID
 */
export function DeleteProduct(productId: string): Promise<APIHttpType<{ message: string }>> {
  return APIHttp.delete(`${API_ENDPOINTS.PRODUCTS.DELETE}/${productId}`);
}

/**
 * Bulk delete products
 */
export function BulkDeleteProducts(productIds: string[]): Promise<APIHttpType<{ deleted: number; failed: number }>> {
  return APIHttp.delete(`${API_ENDPOINTS.PRODUCTS.DELETE}/bulk`, {
    data: { productIds },
  });
}

/**
 * Soft delete a product (mark as inactive)
 */
export function SoftDeleteProduct(productId: string): Promise<APIHttpType<{ message: string }>> {
  return APIHttp.patch(`${API_ENDPOINTS.PRODUCTS.DELETE}/${productId}/soft`);
}
```

### 5. query.ts - React Query Hooks

```typescript
// src/routes/products/query.ts
import {
  useGenericQuery,
  useGenericQueryWithParams,
  useGenericMutation,
  useGenericMutationWithOptimisticUpdate,
} from "../../utils";
import {
  GetProductsList,
  GetProductDetail,
  SearchProducts,
} from "./get";
import {
  CreateProduct,
  UpdateProduct,
  UploadProductImage,
  BulkCreateProducts,
} from "./post";
import {
  DeleteProduct,
  BulkDeleteProducts,
} from "./delete";
import {
  IProduct,
  IProductListParams,
  IProductDetailParams,
  IProductSearchParams,
  ICreateProductRequest,
  IUpdateProductRequest,
} from "./type";

// ===== PRODUCT QUERIES =====

/**
 * Hook to get products list
 */
export const useProductsQuery = (params?: IProductListParams) =>
  useGenericQueryWithParams(
    GetProductsList,
    ["get-products-list"],
    params || {},
    {
      enabled: true,
      staleTime: 2 * 60 * 1000, // 2 minutes
    }
  );

/**
 * Hook to get single product detail
 */
export const useProductDetailQuery = (params: IProductDetailParams) =>
  useGenericQueryWithParams(
    GetProductDetail,
    ["get-product-detail"],
    params,
    {
      enabled: !!params.id,
      staleTime: 5 * 60 * 1000, // 5 minutes
    }
  );

/**
 * Hook to search products
 */
export const useProductSearchQuery = (params: IProductSearchParams) =>
  useGenericQueryWithParams(
    SearchProducts,
    ["search-products"],
    params,
    {
      enabled: !!params.query && params.query.length >= 2,
      staleTime: 1 * 60 * 1000, // 1 minute
    }
  );

// ===== PRODUCT MUTATIONS =====

/**
 * Hook to create a new product
 */
export const useCreateProductMutation = () =>
  useGenericMutation(
    CreateProduct,
    ["get-products-list", "get-product-categories"],
    {
      onSuccess: (data) => {
        console.log("Product created successfully:", data);
      },
      onError: (error) => {
        console.error("Failed to create product:", error);
      },
    }
  );

/**
 * Hook to update a product with optimistic updates
 */
export const useUpdateProductMutation = () =>
  useGenericMutationWithOptimisticUpdate(
    UpdateProduct,
    ["get-products-list", "get-product-detail"],
    (oldData: any, variables: IUpdateProductRequest) => {
      // Optimistic update logic
      if (oldData?.entries) {
        return {
          ...oldData,
          entries: oldData.entries.map((product: IProduct) =>
            product.id === variables.id ? { ...product, ...variables } : product
          ),
        };
      }
      return oldData;
    },
    {
      onSuccess: (data) => {
        console.log("Product updated successfully:", data);
      },
      onError: (error) => {
        console.error("Failed to update product:", error);
      },
    }
  );

/**
 * Hook to delete a product
 */
export const useDeleteProductMutation = () =>
  useGenericMutation(
    DeleteProduct,
    ["get-products-list", "get-product-detail"],
    {
      onSuccess: (data) => {
        console.log("Product deleted successfully:", data);
      },
      onError: (error) => {
        console.error("Failed to delete product:", error);
      },
    }
  );
```

### 6. index.ts - Exports

```typescript
// src/routes/products/index.ts
// Export all types
export * from "./type";

// Export all GET functions
export * from "./get";

// Export all POST/PUT functions
export * from "./post";

// Export all DELETE functions
export * from "./delete";

// Export all query hooks
export * from "./query";
```

## üîß Route Structure Rules

### ‚úÖ You Should Do:

1. **Folder Structure** - Each route should have a separate folder
2. **Naming** - Use kebab-case for folders
3. **Fixed Structure** - Always have 5 main files
4. **Complete Export** - All exports in index.ts
5. **Type Safety** - Don't use any type

### ‚ùå You Should Not Do:

1. **Scattered Files** - Everything in route folder
2. **Wrong Naming** - camelCase for folders
3. **Different Structure** - Extra or missing files
4. **Incomplete Export** - Forgetting exports
5. **Any Type** - Using any type

## üìã Route Checklist

- [ ] Route folder created
- [ ] type.ts file with all interfaces
- [ ] get.ts file with GET functions
- [ ] post.ts file with POST/PUT functions
- [ ] delete.ts file with DELETE functions
- [ ] query.ts file with React Query hooks
- [ ] index.ts file with all exports
- [ ] API endpoints added to api-endpoints.ts
- [ ] Route exported in main index.ts

## üéØ Complete Example - Users Route

### 1. Creating Folder

```bash
mkdir -p packages/framework/src/routes/users
```

### 2. type.ts

```typescript
export interface IUser {
  id: string;
  name: string;
  email: string;
  role: string;
  isActive: boolean;
  createdAt: string;
  updatedAt: string;
}

export interface ICreateUserRequest {
  name: string;
  email: string;
  password: string;
  role: string;
  isActive?: boolean;
}

export interface IUserListParams {
  pageNo?: number;
  rowCount?: number;
  search?: string;
  role?: string;
  isActive?: boolean;
}
```

### 3. get.ts

```typescript
import { APIHttp, API_ENDPOINTS } from "../../utils";
import { APIHttpPaginatedType } from "../../types";
import { IUser, IUserListParams } from "./type";

export function GetUsersList(
  params?: IUserListParams
): Promise<APIHttpPaginatedType<IUser>> {
  return APIHttp.get(API_ENDPOINTS.USERS.LIST, {
    params: {
      pageNo: params?.pageNo || 1,
      rowCount: params?.rowCount || 10,
      search: params?.search,
      role: params?.role,
      isActive: params?.isActive,
    },
  });
}
```

### 4. post.ts

```typescript
import { APIHttp, API_ENDPOINTS } from "../../utils";
import { APIHttpType } from "../../types";
import { IUser, ICreateUserRequest } from "./type";

export function CreateUser(
  userData: ICreateUserRequest
): Promise<APIHttpType<IUser>> {
  return APIHttp.post(API_ENDPOINTS.USERS.CREATE, userData);
}
```

### 5. delete.ts

```typescript
import { APIHttp, API_ENDPOINTS } from "../../utils";
import { APIHttpType } from "../../types";

export function DeleteUser(userId: string): Promise<APIHttpType<{ message: string }>> {
  return APIHttp.delete(`${API_ENDPOINTS.USERS.DELETE}/${userId}`);
}
```

### 6. query.ts

```typescript
import { useGenericQueryWithParams, useGenericMutation } from "../../utils";
import { GetUsersList } from "./get";
import { CreateUser } from "./post";
import { IUserListParams, ICreateUserRequest } from "./type";

export const useUsersQuery = (params?: IUserListParams) =>
  useGenericQueryWithParams(
    GetUsersList,
    ["get-users-list"],
    params || {},
    {
      enabled: true,
      staleTime: 2 * 60 * 1000,
    }
  );

export const useCreateUserMutation = () =>
  useGenericMutation(
    CreateUser,
    ["get-users-list"],
    {
      onSuccess: (data) => {
        console.log("User created successfully:", data);
      },
    }
  );
```

### 7. index.ts

```typescript
export * from "./type";
export * from "./get";
export * from "./post";
export * from "./delete";
export * from "./query";
```

## üéØ Next Steps

After learning Route Structure, you can:

1. **[Adding Endpoints](./adding-endpoints)** - Adding new endpoints
2. **[Examples](./examples)** - Practical examples
3. **[API Reference](./api-reference)** - Complete API reference

---

**Learned Route Structure? Check out [Adding Endpoints](./adding-endpoints)! üöÄ**
